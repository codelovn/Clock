<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BaoHy Monitor • Safe Mode</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* =========================================
           THEME: DEEP OCEAN (AN TOÀN - NGHIÊM TÚC)
           ========================================= */
        :root {
            --bg-dark: #020617;
            --bg-gradient: radial-gradient(circle at 50% 30%, #0f172a 0%, #020617 80%);
            
            --glass-bg: rgba(15, 23, 42, 0.85); /* Nền đậm hơn để chữ rõ */
            --glass-border: rgba(56, 189, 248, 0.15);
            
            --text-main: #f1f5f9;
            --text-mute: #94a3b8;
            
            --accent: #38bdf8;   /* Xanh Cyan (Không dùng vàng) */
            --danger: #ef4444;
            
            --font-main: 'Be Vietnam Pro', sans-serif;
            --font-num: 'JetBrains Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; user-select: none; }
        
        body {
            background-color: var(--bg-dark);
            background-image: var(--bg-gradient);
            color: var(--text-main);
            font-family: var(--font-main);
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- LAYOUT 3 CỘT (CỐ ĐỊNH) --- */
        .grid-container {
            width: 98%; height: 95%;
            display: grid;
            grid-template-columns: 320px 1fr 320px;
            grid-template-rows: 60px 1fr 40px;
            gap: 15px;
            padding: 10px;
            position: relative; z-index: 10;
        }

        /* CARD STYLE */
        .card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px; padding: 15px;
            display: flex; flex-direction: column;
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }
        .card-header {
            font-size: 0.75rem; color: var(--text-mute); font-weight: 700;
            text-transform: uppercase; letter-spacing: 0.5px;
            margin-bottom: 10px; display: flex; align-items: center; gap: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            padding-bottom: 8px;
        }
        .card-header i { color: var(--accent); }

        /* --- 1. SLOGAN BOX (KHÓA CHIỀU CAO) --- */
        /* Đây là phần quan trọng để không bị nhảy khung */
        .slogan-container {
            height: 140px; /* Khóa cứng chiều cao */
            display: flex; align-items: center; justify-content: center;
            background: rgba(255,255,255,0.02);
            border-left: 3px solid var(--accent);
            padding: 0 15px;
            border-radius: 0 6px 6px 0;
            margin-bottom: 15px;
        }
        .slogan-text {
            text-align: center; font-style: italic; font-size: 0.95rem;
            line-height: 1.5; color: #e2e8f0;
            /* Đảm bảo chữ dài tự xuống dòng */
            display: -webkit-box;
            -webkit-line-clamp: 5;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* --- 2. CLOCK (CENTER) --- */
        .center-panel {
            grid-row: 2/3; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
        }
        .clock-huge {
            font-size: 10vw; font-weight: 200; line-height: 1;
            font-family: var(--font-num); letter-spacing: -4px;
            background: linear-gradient(180deg, #fff 20%, #94a3b8 100%);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        .date-text { font-size: 1.2rem; color: var(--accent); margin-bottom: 5px; }
        .lunar-text { 
            font-size: 0.9rem; color: var(--text-mute); font-family: var(--font-num);
            background: rgba(255,255,255,0.05); padding: 5px 15px; border-radius: 20px;
        }

        /* --- 3. EVENT LIST --- */
        .event-list { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; }
        .event-item {
            background: rgba(255,255,255,0.03); padding: 10px; border-radius: 6px;
            display: flex; align-items: center; gap: 10px; cursor: pointer;
            border: 1px solid transparent; transition: 0.2s;
        }
        .event-item:hover { border-color: var(--glass-border); background: rgba(56, 189, 248, 0.05); }
        .ev-time { 
            background: rgba(0,0,0,0.4); padding: 3px 6px; border-radius: 4px;
            font-size: 0.8rem; color: var(--accent); font-family: var(--font-num);
        }
        .ev-content { font-size: 0.85rem; flex: 1; }

        /* --- 4. DOCK --- */
        .dock-bar {
            margin-top: 40px;
            background: rgba(2, 6, 23, 0.8); border: 1px solid var(--glass-border);
            padding: 10px 25px; border-radius: 20px;
            display: flex; gap: 20px;
        }
        .dock-icon {
            width: 45px; height: 45px; display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; color: var(--text-mute); cursor: pointer;
            border-radius: 10px; transition: 0.2s; background: rgba(255,255,255,0.03);
        }
        .dock-icon:hover { background: var(--accent); color: #000; transform: translateY(-5px); }

        /* --- 5. FOOTER & HEADER --- */
        .header { grid-column: 1/-1; display: flex; justify-content: space-between; align-items: center; padding: 0 10px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .footer { grid-column: 1/-1; border-top: 1px solid rgba(255,255,255,0.05); display: flex; align-items: center; }
        .marquee { flex: 1; white-space: nowrap; overflow: hidden; font-size: 0.85rem; color: var(--text-mute); }
        .marquee span { display: inline-block; padding-left: 100%; animation: scroll 30s linear infinite; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        /* --- MODALS --- */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 99; display: none; align-items: center; justify-content: center; }
        .modal-box { background: #0f172a; border: 1px solid var(--accent); padding: 25px; border-radius: 15px; width: 350px; }
        .inp { width: 100%; padding: 10px; margin: 10px 0; background: #1e293b; border: 1px solid #334155; color: white; border-radius: 6px; }
        .btn { width: 100%; padding: 10px; background: var(--accent); border: none; font-weight: bold; border-radius: 6px; cursor: pointer; }

        /* RESPONSIVE */
        @media (max-width: 1024px) {
            .grid-container { display: flex; flex-direction: column; overflow-y: auto; height: 100vh; }
            .left-col, .right-col { height: auto; min-height: 300px; flex-shrink: 0; }
            .clock-huge { font-size: 18vw; }
        }
    </style>
</head>
<body>

    <div class="grid-container">
        
        <header class="header">
            <div style="display: flex; align-items: center; gap: 8px; color: var(--accent);">
                <i class="fas fa-satellite-dish"></i> <span id="w-stat">Đang kết nối vệ tinh...</span>
            </div>
            <div style="font-size: 0.75rem; letter-spacing: 1px; color: var(--text-mute);">HỆ THỐNG QUẢN LÝ TẬP TRUNG</div>
        </header>

        <aside class="left-col" style="grid-row: 2/3; display: flex; flex-direction: column; gap: 15px;">
            <div class="card">
                <div class="card-header"><i class="fas fa-flag"></i> KHẨU HIỆU HÀNH ĐỘNG</div>
                <div class="slogan-container">
                    <div class="slogan-text" id="slogan-txt">
                        </div>
                </div>
            </div>

            <div class="card" style="flex: 1; min-height: 200px;">
                <div class="card-header">
                    <i class="fas fa-check-square"></i> NHIỆM VỤ TRONG NGÀY
                    <i class="fas fa-trash" style="margin-left: auto; cursor: pointer;" onclick="Events.clear()"></i>
                </div>
                <div class="event-list" id="event-list"></div>
                <button class="btn" style="margin-top: 10px; background: rgba(255,255,255,0.05); color: var(--text-mute); border: 1px dashed #475569;" onclick="Events.open()">+ Thêm nhiệm vụ</button>
            </div>
        </aside>

        <main class="center-panel">
            <div class="clock-huge" id="clock">00:00</div>
            <div class="date-text" id="date-solar">...</div>
            <div class="lunar-text" id="date-lunar">...</div>

            <div class="dock-bar">
                <div class="dock-icon" onclick="Timer.open()" title="Hẹn giờ"><i class="fas fa-hourglass-half"></i></div>
                <div class="dock-icon" onclick="alert('Máy tính đang cập nhật')" title="Máy tính"><i class="fas fa-calculator"></i></div>
                <div class="dock-icon" onclick="window.open('https://calendar.google.com')" title="Lịch"><i class="far fa-calendar-alt"></i></div>
                <div class="dock-icon" onclick="toggleFull()" title="Toàn màn hình"><i class="fas fa-expand"></i></div>
            </div>
        </main>

        <aside class="right-col" style="grid-row: 2/3; display: flex; flex-direction: column; gap: 15px;">
            <div class="card" style="flex: 1;">
                <div class="card-header">
                    <i class="fas fa-pen"></i> GHI CHÚ NHANH
                    <i class="fas fa-save" style="margin-left: auto; color: var(--accent);"></i>
                </div>
                <textarea id="note-area" style="flex: 1; background: transparent; border: none; color: #e2e8f0; resize: none; width: 100%; font-family: var(--font-main);" placeholder="Nhập nội dung... (Tự động lưu)"></textarea>
            </div>

            <div class="card">
                <div class="card-header"><i class="fas fa-server"></i> TRẠNG THÁI</div>
                <div style="font-size: 0.85rem; display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Kết nối</span> <span style="color: #4ade80;">An toàn</span>
                </div>
                <div style="font-size: 0.85rem; display: flex; justify-content: space-between;">
                    <span>Phiên bản</span> <span style="color: var(--accent);">v9.0 Safe</span>
                </div>
            </div>
        </aside>

        <footer class="footer">
            <div style="background: var(--accent); color: black; padding: 2px 10px; font-weight: bold; font-size: 0.75rem; border-radius: 4px; margin-right: 15px;">TIN TỨC</div>
            <div class="marquee"><span id="news">Đang cập nhật tin tức...</span></div>
        </footer>

    </div>

    <div class="modal" id="modal-evt">
        <div class="modal-box">
            <h3 style="color: var(--accent); margin-bottom: 15px;">THÊM NHIỆM VỤ</h3>
            <input type="time" id="inp-time" class="inp" style="color-scheme: dark;">
            <input type="text" id="inp-txt" class="inp" placeholder="Nội dung...">
            <button class="btn" onclick="Events.add()">LƯU LẠI</button>
            <button class="btn" style="background: transparent; border: 1px solid #475569; margin-top: 5px;" onclick="Events.close()">ĐÓNG</button>
        </div>
    </div>

    <div class="modal" id="modal-timer">
        <div class="modal-box">
            <h3 style="color: var(--accent);">HẸN GIỜ</h3>
            <div id="tm-disp" style="font-size: 3rem; margin: 20px 0; font-family: var(--font-num); color: var(--accent); text-align: center;">00:00</div>
            <div id="tm-inp" style="display: flex; gap: 10px;">
                <input type="number" id="tm-m" class="inp" placeholder="Phút" style="text-align: center;">
                <input type="number" id="tm-s" class="inp" placeholder="Giây" style="text-align: center;">
            </div>
            <button class="btn" style="margin-top: 10px;" onclick="Timer.start()">BẮT ĐẦU</button>
            <button class="btn" style="background: #334155; margin-top: 5px;" onclick="Timer.stop()">DỪNG</button>
            <button class="btn" style="background: transparent; color: #94a3b8; margin-top: 0;" onclick="Timer.close()">Đóng</button>
        </div>
    </div>

    <script>
        // --- 1. KHẨU HIỆU CHUẨN (KHÔNG ĐỔI) ---
        const Slogans = [
            "Đoàn kết, kỷ cương, sáng tạo, hiệu quả",
            "Đẩy mạnh chuyển đổi số quốc gia, phát triển kinh tế số",
            "Phát huy sức mạnh đại đoàn kết toàn dân tộc",
            "Xây dựng đất nước phồn vinh, hạnh phúc",
            "Học tập và làm theo tư tưởng, đạo đức, phong cách Hồ Chí Minh"
        ];
        let slgIdx = 0;
        
        function rotateSlogan() {
            const el = document.getElementById('slogan-txt');
            el.style.opacity = 0;
            setTimeout(() => {
                slgIdx = (slgIdx + 1) % Slogans.length;
                el.innerText = Slogans[slgIdx];
                el.style.opacity = 1;
            }, 300);
        }
        document.getElementById('slogan-txt').innerText = Slogans[0];
        setInterval(rotateSlogan, 5000);

        // --- 2. CLOCK & DATE ---
        function tick() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('vi-VN', {hour12: false});
            
            const days = ['Chủ Nhật', 'Thứ Hai', 'Thứ Ba', 'Thứ Tư', 'Thứ Năm', 'Thứ Sáu', 'Thứ Bảy'];
            document.getElementById('date-solar').innerText = `${days[now.getDay()]}, ngày ${now.getDate()} tháng ${now.getMonth()+1}`;
            
            // Âm lịch ước lượng (Để hiển thị)
            document.getElementById('date-lunar').innerText = `Âm lịch: ${now.getDate() > 10 ? now.getDate()-10 : 25}/${now.getMonth() > 1 ? now.getMonth()-1 : 12}`;
        }
        setInterval(tick, 1000); tick();

        // --- 3. EVENTS ---
        const Events = {
            data: JSON.parse(localStorage.getItem('bh_evt') || '[]'),
            render() {
                const con = document.getElementById('event-list');
                con.innerHTML = '';
                this.data.sort((a,b) => a.time.localeCompare(b.time));
                this.data.forEach((e, i) => {
                    con.innerHTML += `
                        <div class="event-item">
                            <span class="ev-time">${e.time}</span>
                            <span class="ev-content">${e.text}</span>
                            <i class="fas fa-times" style="color: #ef4444;" onclick="Events.del(${i})"></i>
                        </div>
                    `;
                });
                localStorage.setItem('bh_evt', JSON.stringify(this.data));
            },
            add() {
                const t = document.getElementById('inp-time').value;
                const txt = document.getElementById('inp-txt').value;
                if(t && txt) {
                    this.data.push({time:t, text:txt});
                    this.render(); this.close();
                }
            },
            del(i) { this.data.splice(i,1); this.render(); },
            clear() { if(confirm("Xóa hết?")) { this.data=[]; this.render(); } },
            open() { document.getElementById('modal-evt').style.display='flex'; },
            close() { document.getElementById('modal-evt').style.display='none'; }
        };
        Events.render();

        // --- 4. TIMER ---
        const Timer = {
            int: null,
            start() {
                if(this.int) return;
                const m = parseInt(document.getElementById('tm-m').value)||0;
                const s = parseInt(document.getElementById('tm-s').value)||0;
                let tot = m*60+s;
                if(tot<=0) return alert("Nhập giờ!");
                
                document.getElementById('tm-inp').style.display='none';
                this.int = setInterval(() => {
                    tot--;
                    const dm = Math.floor(tot/60).toString().padStart(2,'0');
                    const ds = (tot%60).toString().padStart(2,'0');
                    document.getElementById('tm-disp').innerText = `${dm}:${ds}`;
                    if(tot<=0) { this.stop(); alert("Hết giờ!"); }
                }, 1000);
            },
            stop() { clearInterval(this.int); this.int=null; document.getElementById('tm-inp').style.display='flex'; document.getElementById('tm-disp').innerText="00:00"; },
            open() { document.getElementById('modal-timer').style.display='flex'; },
            close() { document.getElementById('modal-timer').style.display='none'; }
        };

        // --- 5. NETWORK ---
        async function loadNet() {
            // Weather
            if(navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (p) => {
                    const r = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${p.coords.latitude}&longitude=${p.coords.longitude}&current_weather=true`);
                    const d = await r.json();
                    document.getElementById('w-stat').innerText = `${Math.round(d.current_weather.temperature)}°C | Ổn định`;
                });
            }
            // News
            try {
                const r = await fetch("https://api.rss2json.com/v1/api.json?rss_url=https://vnexpress.net/rss/tin-moi-nhat.rss");
                const d = await r.json();
                let h = "";
                d.items.slice(0,10).forEach(i => h += ` ★ ${i.title}`);
                document.getElementById('news').innerText = h;
            } catch(e){}
        }
        loadNet();

        // --- 6. NOTES ---
        const note = document.getElementById('note-area');
        note.value = localStorage.getItem('bh_note')||"";
        note.addEventListener('input', () => localStorage.setItem('bh_note', note.value));

        function toggleFull() { if(!document.fullscreenElement) document.documentElement.requestFullscreen(); else document.exitFullscreen(); }
    </script>
</body>
</html>
